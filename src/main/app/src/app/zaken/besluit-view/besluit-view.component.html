<!--
  ~ SPDX-FileCopyrightText: 2022 Atos
  ~ SPDX-License-Identifier: EUPL-1.2+
  -->
<mat-card class="besluit-gegevens">
    <mat-card-header>
        <mat-card-title>{{besluit.identificatie}}
            <button *ngIf="!readonly" mat-icon-button (click)="besluitWijzigen.emit()">
                <mat-icon>edit</mat-icon>
            </button>
        </mat-card-title>
    </mat-card-header>
    <mat-card-content>

        <mat-tab-group>
            <mat-tab id="algemeneGegevens_tab" label="{{'gegevens.algemeen' | translate}}">
                <div class="content" fxLayout="row wrap" fxLayout.lt-sm="column wrap">
                    <zac-static-text fxFlex="50" [label]="'besluit' | translate" [value]="besluit.besluittype.naam"></zac-static-text>
                    <zac-static-text fxFlex="50" [label]="'datum' | translate" [value]="besluit.datum | datum "></zac-static-text>
                    <zac-static-text fxFlex="50" [label]="'ingangsdatum' | translate" [value]="besluit.ingangsdatum | datum"></zac-static-text>
                    <zac-static-text fxFlex="50" [label]="'vervaldatum' | translate" [value]="besluit.vervaldatum | datum"></zac-static-text>
                    <zac-static-text fxFlex="100" [label]="'toelichting' | translate" [value]="besluit.toelichting"></zac-static-text>
                    <div class="table-field-wrapper">
                        <mfb-form-field [field]="besluitInformatieobjecten"></mfb-form-field>
                    </div>
                </div>
            </mat-tab>

            <mat-tab id="historie_tab" label="{{'historie' | translate}}">
                <div class="table-wrapper historie-table">
                    <table mat-table [dataSource]="historie" matSort>
                        <ng-container matColumnDef="datum">
                            <th *matHeaderCellDef mat-header-cell
                                mat-sort-header> {{'datum' | translate}} </th>
                            <td *matCellDef="let regel" mat-cell>
                                <div matTooltip="{{regel.datumTijd | datum:'short'}}">
                                    {{regel.datumTijd | datum | empty}}
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="gebruiker">
                            <th *matHeaderCellDef mat-header-cell
                                mat-sort-header> {{'door' | translate}} </th>
                            <td *matCellDef="let regel" mat-cell>
                                <div matTooltip="{{regel.applicatie}}">
                                    {{regel.door | empty}}
                                </div>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="wijziging">
                            <th mat-header-cell *matHeaderCellDef> {{'wijziging' | translate}} </th>
                            <td mat-cell *matCellDef="let regel">
                                <read-more [text]="regel.attribuutLabel | translate" [maxLength]="20"></read-more>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="oudeWaarde">
                            <th mat-header-cell *matHeaderCellDef> {{'waarde.oud' | translate}} </th>
                            <td mat-cell *matCellDef="let regel">
                                <read-more [text]="regel.oudeWaarde | empty" [maxLength]="20"></read-more>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="nieuweWaarde">
                            <th mat-header-cell *matHeaderCellDef> {{'waarde.nieuw' | translate}} </th>
                            <td mat-cell *matCellDef="let regel">
                                <read-more [text]="regel.nieuweWaarde | empty" [maxLength]="20"></read-more>
                            </td>
                        </ng-container>
                        <ng-container matColumnDef="toelichting">
                            <th mat-header-cell *matHeaderCellDef> {{'toelichting' | translate}} </th>
                            <td mat-cell *matCellDef="let regel">
                                <read-more [text]="regel.toelichting | empty" [maxLength]="20"></read-more>
                            </td>
                        </ng-container>
                        <tr mat-header-row
                            *matHeaderRowDef="['datum', 'gebruiker', 'wijziging', 'oudeWaarde', 'nieuweWaarde', 'toelichting']; sticky: true"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['datum', 'gebruiker', 'wijziging', 'oudeWaarde', 'nieuweWaarde', 'toelichting'];"></tr>
                    </table>
                    <p *ngIf="historie.data.length == 0">{{'msg.geen.gegevens.gevonden' | translate}}</p>
                </div>
            </mat-tab>
        </mat-tab-group>
    </mat-card-content>
</mat-card>
